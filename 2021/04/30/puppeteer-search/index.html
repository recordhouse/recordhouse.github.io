<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[Express] Puppeteer, React, Express를 활용한 크롤러 만들기 및 Heroku에 배포하기 - 기록맨</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="기록맨"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="기록맨"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="프론트엔드 기술 블로그"><meta property="og:type" content="blog"><meta property="og:title" content="기록맨"><meta property="og:url" content="https://recordboy.github.io/"><meta property="og:site_name" content="기록맨"><meta property="og:description" content="프론트엔드 기술 블로그"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://recordboy.github.io/img/logo_ko.png"><meta property="article:published_time" content="2021-04-30T08:14:49.000Z"><meta property="article:modified_time" content="2022-09-27T15:08:28.233Z"><meta property="article:author" content="recordboy"><meta property="article:tag" content="express"><meta property="article:tag" content="react"><meta property="article:tag" content="heroku"><meta property="article:tag" content="web crawling"><meta property="article:tag" content="typescript"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/logo_ko.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://recordboy.github.io/2021/04/30/puppeteer-search/"},"headline":"기록맨","image":["https://recordboy.github.io/img/og_image.png"],"datePublished":"2021-04-30T08:14:49.000Z","dateModified":"2022-09-27T15:08:28.233Z","author":{"@type":"Person","name":"recordboy"},"description":"이번에는 Puppeteer를 활용하여 웹 크롤러를 만들어 보겠다. 클라이언트는 React, 서버는 Express를 사용하고 로컬에서 작업이 끝나면 Heroku에 배포까지 해보자. 결과물과 소스는 아래에서 확인할 수 있다.  결과물: https:&#x2F;&#x2F;recordboy-scrap-sample.herokuapp.com 소스: https:&#x2F;&#x2F;github.com&#x2F;re"}</script><link rel="canonical" href="https://recordboy.github.io/2021/04/30/puppeteer-search/"><link rel="alternate" href="https://recordboy.github.io/rss2.xml" title="기록맨" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-150818933-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-150818933-1');</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="naver-site-verification" content="543ec882f0490de121e9e07d9c29c2c8380464df"><meta name="generator" content="Hexo 5.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="기록맨" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/recordboy"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="카탈로그" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-04-30T08:14:49.000Z" title="2021-04-30T08:14:49.000Z">2021-04-30</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-09-27T15:08:28.233Z" title="2022-09-27T15:08:28.233Z">2022-09-28</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/server/">server</a><span> / </span><a class="link-muted" href="/categories/server/express/">express</a></span><span class="level-item">한 시간안에 읽기 (약 7322 단어)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>회 방문</span></div></div><h1 class="title is-3 is-size-4-mobile">[Express] Puppeteer, React, Express를 활용한 크롤러 만들기 및 Heroku에 배포하기</h1><div class="content"><p>이번에는 Puppeteer를 활용하여 웹 크롤러를 만들어 보겠다. 클라이언트는 React, 서버는 Express를 사용하고 로컬에서 작업이 끝나면 Heroku에 배포까지 해보자. 결과물과 소스는 아래에서 확인할 수 있다.</p>
<ul>
<li>결과물: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://recordboy-scrap-sample.herokuapp.com/">https://recordboy-scrap-sample.herokuapp.com</a></li>
<li>소스: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/recordboy/scrap-sample">https://github.com/recordboy/scrap-sample</a></li>
</ul>
<blockquote>
<p>결과물은 헤로쿠에 배포되었기 때문에 처음 페이지가 열릴때 로딩시간이 10초에서 30초정도 걸릴수 있다.</p>
</blockquote>
<a id="more"></a>

<h1 id="Puppeteer"><a href="#Puppeteer" class="headerlink" title="Puppeteer"></a>Puppeteer</h1><p>Puppeteer는 Google Chrome 개발팀에서 직접 개발한 Chrome(혹은 Chromium) 렌더링 엔진을 이용하는 node.js 라이브러리이다. Puppeteer는 headless 모드를 지원하며, 이는 브라우저를 띄우지 않고 렌더링 작업을 가상으로 진행하고 실제 브라우저와 동일하게 동작한다. Puppeteer는 다양한 기능을 가지고 있으며 아래와 같은 기능들이 있다.</p>
<ul>
<li>웹페이지의 스크린샷과 PDF를 생성한다.</li>
<li>SPA(단일 페이지)를 크롤링하고 미리 렌더링된 콘텐츠(예: SSR)를 생성한다.</li>
<li>폼 입력, UI 테스트, 키보드 입력 등을 자동화 할 수 있다.</li>
<li>최신 자바스크립트 및 브라우저 기능을 이용해 최신버전의 크롬에서 직접 테스트할 수 있다.</li>
<li>사이트의 Timeline Trace를 기록하여 성능이나 문제를 진단할 수 있다.</li>
<li>크롬 확장 프로그램을 테스트 할 수 있다.</li>
</ul>
<h1 id="프로젝트-초기화"><a href="#프로젝트-초기화" class="headerlink" title="프로젝트 초기화"></a>프로젝트 초기화</h1><p>이 부분은 <a href="https://recordboy.github.io/2020/11/05/express-react-heroku-init/">[Express] Express + React 연동 및 Heroku에 배포하기</a> 포스팅과 비슷한 부분이 많기 때문에 각 단계의 추가 설명 없이 진행하도록 하겠다.</p>
<h2 id="디렉토리-생성-및-필요-모듈-설치"><a href="#디렉토리-생성-및-필요-모듈-설치" class="headerlink" title="디렉토리 생성 및 필요 모듈 설치"></a>디렉토리 생성 및 필요 모듈 설치</h2><p>디렉토리를 생성하고 이그노 파일을 생성한 뒤 npm 초기화 및 필요한 모듈을 설치한다.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir my-app</span><br><span class="line">$ cd my-app </span><br><span class="line">$ echo node_modules &gt; .gitignore</span><br><span class="line">$ npm init -y</span><br><span class="line">$ npm install express nodemon concurrently</span><br></pre></td></tr></table></figure>

<p>이제 서버로 사용할 <code>index.js</code> 파일을 생성하고 아래 내용을 입력한다.</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// express 객체 생성</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 포트를 app 객체에 설정</span></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.listen(port);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 미들웨어 함수를 특정 경로에 등록</span></span><br><span class="line">app.use(<span class="string">&quot;/api/data&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.json(&#123; <span class="attr">greeting</span>: <span class="string">&quot;Hello World&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`server running at http <span class="subst">$&#123;port&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>

<p><code>package.json</code> 파일을 열고 <code>scripts</code> 항목에 <code>&quot;start&quot;: &quot;nodemon index.js&quot;</code>를 추가한다.</p>
<figure class="highlight javascript"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="string">&quot;nodemon index.js&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="리액트-초기화"><a href="#리액트-초기화" class="headerlink" title="리액트 초기화"></a>리액트 초기화</h2><p>이제 클라이언트로 사용할 리액트를 생성하며, 이름은 <code>client</code>로 한다.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ create-react-app client --use-npm --template typescript</span><br></pre></td></tr></table></figure>

<h2 id="프록시-설정"><a href="#프록시-설정" class="headerlink" title="프록시 설정"></a>프록시 설정</h2><p>설치가 완료되면 <code>client</code> 디렉토리로 이동해서에 아래 모듈을 설치한다.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd client</span><br><span class="line">$ npm install http-proxy-middleware</span><br></pre></td></tr></table></figure>

<p>설치한 뒤 <code>/client/src/</code> 디렉토리로 가서 <code>setupProxy.js</code> 파일을 생성하고 아래 코드를 입력해준다.</p>
<figure class="highlight javascript"><figcaption><span>setupProxy.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">&quot;http-proxy-middleware&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.use(</span><br><span class="line">    createProxyMiddleware(<span class="string">&quot;/api/data&quot;</span>, &#123;</span><br><span class="line">      target: <span class="string">&quot;http://localhost:5000&quot;</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="서버-express-클라이언트-react-동시-시작-설정"><a href="#서버-express-클라이언트-react-동시-시작-설정" class="headerlink" title="서버(express), 클라이언트(react) 동시 시작 설정"></a>서버(express), 클라이언트(react) 동시 시작 설정</h2><p>루트로 가서 <code>package.json</code>의 <code>scripts</code>항목을 아래처럼 수정해준다.</p>
<figure class="highlight javascript"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="string">&quot;nodemon index.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;concurrently \&quot;npm run dev:server\&quot; \&quot;npm run dev:client\&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev:server&quot;</span>: <span class="string">&quot;npm start&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev:client&quot;</span>: <span class="string">&quot;cd client &amp;&amp; npm start&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제 아래 명령어로 서버와 클라이언트를 동시에 시작할 수 있다.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure>

<p>이제 작업하기 위한 전반적인 준비가 끝났다. 우선 클라이언트 영역부터 작업해보자.</p>
<h1 id="클라이언트에서-요청-작업"><a href="#클라이언트에서-요청-작업" class="headerlink" title="클라이언트에서 요청 작업"></a>클라이언트에서 요청 작업</h1><h2 id="검색-폼-및-리스트-추가"><a href="#검색-폼-및-리스트-추가" class="headerlink" title="검색 폼 및 리스트 추가"></a>검색 폼 및 리스트 추가</h2><p><code>/client/src/</code> 디렉토리에 <code>components</code> 폴더를 생성하고 <code>SearchForm.tsx</code>, <code>SearchList.tsx</code> 파일을 생성하고 각각 아래처럼 입력해 준다.</p>
<p><strong>SearchForm.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>SearchForm.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchForm = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;form&quot;</span>&gt;</span><br><span class="line">      &lt;input type=<span class="string">&quot;text&quot;</span> className=<span class="string">&quot;form-text&quot;</span> /&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        type=<span class="string">&quot;button&quot;</span></span><br><span class="line">        className=<span class="string">&quot;form-btn&quot;</span></span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          fetch(<span class="string">&quot;api/data&quot;</span>)</span><br><span class="line">            .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> res.json();</span><br><span class="line">            &#125;)</span><br><span class="line">            .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="built_in">console</span>.log(data);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        search</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchForm;</span><br></pre></td></tr></table></figure>

<p><strong>SearchList.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>SearchList.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchList = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;card-list&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchList;</span><br></pre></td></tr></table></figure>

<p><code>App.tsx</code>은 아래처럼 변경해준다.</p>
<figure class="highlight javascript"><figcaption><span>App.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchForm <span class="keyword">from</span> <span class="string">&quot;./components/SearchForm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchList <span class="keyword">from</span> <span class="string">&quot;./components/SearchList&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;SearchForm /&gt;</span><br><span class="line">      &lt;SearchList /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<p><code>search</code> 버튼을 클릭하면 <code>fetch</code> 함수로 서버(<code>http://localhost:5000/api/data</code>)에 요청을 하게 되고 응답값으로 콘솔창에 <code>&#123; greeting: &quot;Hello World&quot; &#125;</code>가 출력되는 것을 확인할 수 있다.</p>
<h2 id="fetch-함수를-App-컴포넌트로-이동"><a href="#fetch-함수를-App-컴포넌트로-이동" class="headerlink" title="fetch 함수를 App 컴포넌트로 이동"></a>fetch 함수를 App 컴포넌트로 이동</h2><p>이제 검색키워드를 서버에 보내기 위헤 <code>SearchForm</code>, <code>App</code> 컴포넌트를 아래처럼 수정해 준다.</p>
<p><strong>SearchForm.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>SearchForm.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchForm = <span class="function">(<span class="params">props: &#123; getData: any &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; getData &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> [keyword, setKeyword] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;form&quot;</span>&gt;</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">&quot;text&quot;</span></span><br><span class="line">        className=<span class="string">&quot;form-text&quot;</span></span><br><span class="line">        onChange=&#123;<span class="function">(<span class="params">e: any</span>) =&gt;</span> &#123;</span><br><span class="line">          setKeyword(e.target.value);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        onKeyPress=&#123;<span class="function">(<span class="params">e: any</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (e.charCode === <span class="number">13</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (keyword) &#123;</span><br><span class="line">              getData(keyword);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        type=<span class="string">&quot;button&quot;</span></span><br><span class="line">        className=<span class="string">&quot;form-btn&quot;</span></span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (keyword) &#123;</span><br><span class="line">            getData(keyword);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        search</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchForm;</span><br></pre></td></tr></table></figure>

<p><strong>App.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>App.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchForm <span class="keyword">from</span> <span class="string">&quot;./components/SearchForm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchList <span class="keyword">from</span> <span class="string">&quot;./components/SearchList&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> getData = <span class="function">(<span class="params">keyword: string</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;검색 키워드: &quot;</span> + keyword);</span><br><span class="line">    fetch(<span class="string">`api/data?keyword=<span class="subst">$&#123;keyword&#125;</span>`</span>)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res.json();</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;SearchForm getData=&#123;getData&#125; /&gt;</span><br><span class="line">      &lt;SearchList /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<p><code>SearchForm</code>에 있던 <code>fetch</code>함수를 상위 <code>App</code>컴포넌트의 <code>getData</code> 함수에 넣어놨다. 이 함수를 <code>SearchForm</code>에 전달하였고, 검색버튼을 클릭하면 <code>getData</code>가 실행되며, <code>input</code> 태그의 검색 키워드가 쿼리스트링에 할당되어 서버에 전달되게 된다. 검색폼에서 엔터를 눌러도 요청할 수 있도록 <code>onKeyPress</code> 이벤트도 추가해 주자. 이제 응답값을 받기 위해 서버 작업을 해보자. </p>
<h1 id="서버에서-요청-받기"><a href="#서버에서-요청-받기" class="headerlink" title="서버에서 요청 받기"></a>서버에서 요청 받기</h1><p>이제 루트로 가서 <code>index.js</code>를 아래처럼 수정해 준다.</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// express 객체 생성</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 포트를 app 객체에 설정</span></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.listen(port);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 미들웨어 함수를 특정 경로에 등록</span></span><br><span class="line">app.use(<span class="string">&quot;/api/data&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;검색 키워드: &quot;</span> + req.query.keyword);</span><br><span class="line">  res.json(&#123; <span class="attr">greeting</span>: <span class="string">&quot;Hello World&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`server running at http <span class="subst">$&#123;port&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>

<p>요청을 하면 서버 터미널에 검색 키워드가 출력될 것이다. 위 코드를 보면 미들웨어 함수에서 요청값(<code>req.query.keyword</code>)을 받기 때문이다.</p>
<h1 id="Puppeteer-설치"><a href="#Puppeteer-설치" class="headerlink" title="Puppeteer 설치"></a>Puppeteer 설치</h1><p>이제 브라우저로 검색하기 위해 루트 디렉토리에 Puppeteer를 설치해주자.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install puppeteer</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>Puppeteer는 기본적으로 Chrome 혹은 Chromium 런더링 엔진을 사용하기 때문에 기본적으로  Chromium 브라우저를 내장하고 있다.</li>
<li>따로 Chromium 브라우저를 다운받지 않으려면 <code>$ npm install puppeteer-core</code> 명령어를 사용하면 되며, Puppeteer는 로컬에 있는 Chrome 혹은 Chromium을 사용하게 될 것이다.</li>
</ul>
</blockquote>
<h1 id="검색해보기"><a href="#검색해보기" class="headerlink" title="검색해보기"></a>검색해보기</h1><p>Puppeteer를 설치했으면 이제 브라우저를 실행해 검색을 해보자. <code>index.js</code>를 아래처럼 수정해준다.</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// express 객체 생성</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 포트를 app 객체에 설정</span></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.listen(port);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 미들웨어 함수를 특정 경로에 등록</span></span><br><span class="line">app.use(<span class="string">&quot;/api/data&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;검색 키워드: &quot;</span> + req.query.keyword);</span><br><span class="line">  openBrowser(req.query.keyword);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`server running at http <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// puppeteer 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&quot;puppeteer&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 브라우저 오픈 함수</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>keyword 검색 키워드</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">openBrowser</span>(<span class="params">keyword</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 브라우저 실행 및 옵션, 현재 옵션은 headless 모드 사용 여부</span></span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123; <span class="attr">headless</span>: <span class="literal">false</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 브라우저 열기</span></span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 포탈로 이동</span></span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">&quot;https://www.google.com/&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 키워드 입력</span></span><br><span class="line">  <span class="keyword">await</span> page.type(<span class="string">&quot;input[class=&#x27;gLFyf gsfi&#x27;]&quot;</span>, keyword);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 키워드 검색</span></span><br><span class="line">  <span class="keyword">await</span> page.type(<span class="string">&quot;input[class=&#x27;gLFyf gsfi&#x27;]&quot;</span>, <span class="built_in">String</span>.fromCharCode(<span class="number">13</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>puppeteer</code> 모듈을 불러온 뒤 <code>openBrowser</code> 함수를 추가하였으며, 포탈 이동 및 응답값을 받기 위해 <code>async</code> 함수로 감싸주었다. 브라우저 실행 옵션에서 <code>headless</code> 모드를 <code>true</code>로 설정하면 브라우저가 화면에 노출이 되지 않고 백그라운드에서 작동된다. 지금은 브라우저 작동 순서를 보기 위해 임시로 <code>false</code>로 설정해 준다. 위처럼 수정해 준 뒤 클라이언트 화면으로 가서 검색해 보면 아래 순서대로 작동된다.</p>
<ol>
<li>Chromium 브라우저가 실행되고</li>
<li>Google 사이트로 이동한 뒤</li>
<li>Google 검색창에 검색 키워드를 넣고</li>
<li>엔터를 눌러 검색을 시작한다.</li>
</ol>
<h1 id="검색-내용-크롤링하기"><a href="#검색-내용-크롤링하기" class="headerlink" title="검색 내용 크롤링하기"></a>검색 내용 크롤링하기</h1><p>이제 검색결과를 크롤링을 해보자.</p>
<h2 id="크롤링할-내용-형태"><a href="#크롤링할-내용-형태" class="headerlink" title="크롤링할 내용 형태"></a>크롤링할 내용 형태</h2><figure class="highlight javascript"><figcaption><span>JSON</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  title: <span class="string">&quot;제목&quot;</span>,</span><br><span class="line">  link: <span class="string">&quot;링크&quot;</span>,</span><br><span class="line">  text: <span class="string">&quot;내용&quot;</span>,</span><br><span class="line">  kategorie: <span class="string">&quot;카테고리&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>크롤링으로 가져올 정보는 위 형태로 가져올 것이며, <code>index.js</code>를 아래처럼 코드를 수정한다.</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// express 객체 생성</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 포트를 app 객체에 설정</span></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.listen(port);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 미들웨어 함수를 특정 경로에 등록</span></span><br><span class="line">app.use(<span class="string">&quot;/api/data&quot;</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;검색 키워드: &quot;</span> + req.query.keyword);</span><br><span class="line">  <span class="keyword">const</span> resultList = <span class="keyword">await</span> openBrowser(req.query.keyword);</span><br><span class="line">  <span class="built_in">console</span>.log(resultList);</span><br><span class="line">  res.json(resultList);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`server running at http <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// puppeteer 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&quot;puppeteer&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 브라우저 오픈 함수</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>keyword 검색 키워드</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;array&#125;</span> </span>검색 결과</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">openBrowser</span>(<span class="params">keyword</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 브라우저 실행 및 옵션, 현재 옵션은 headless 모드 사용 여부</span></span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123; <span class="attr">headless</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 브라우저 열기</span></span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 포탈로 이동</span></span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">&quot;https://www.google.com/&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 키워드 입력</span></span><br><span class="line">  <span class="keyword">await</span> page.type(<span class="string">&quot;input[class=&#x27;gLFyf gsfi&#x27;]&quot;</span>, keyword);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 키워드 검색</span></span><br><span class="line">  <span class="keyword">await</span> page.type(<span class="string">&quot;input[class=&#x27;gLFyf gsfi&#x27;]&quot;</span>, <span class="built_in">String</span>.fromCharCode(<span class="number">13</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 예외 처리</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 해당 콘텐츠가 로드될 때까지 대기</span></span><br><span class="line">    <span class="keyword">await</span> page.waitForSelector(<span class="string">&quot;#rso div.g&quot;</span>, &#123; <span class="attr">timeout</span>: <span class="number">10000</span> &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// 해당 태그가 없을 시 검색결과 없음 반환</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;에러 발생: &quot;</span> + error);</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        title: <span class="string">&quot;검색결과 없음&quot;</span>,</span><br><span class="line">        link: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        text: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        kategorie: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 호출된 브라우저 영역</span></span><br><span class="line">  <span class="keyword">const</span> searchData = <span class="keyword">await</span> page.evaluate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 검색된 돔 요소를 배열에 담음</span></span><br><span class="line">    <span class="keyword">const</span> contentsList = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;#rso div.g&quot;</span>));</span><br><span class="line">    <span class="keyword">let</span> contentsObjList = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 검색결과 크롤링</span></span><br><span class="line">    contentsList.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.className === <span class="string">&quot;g&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> title = item.querySelector(<span class="string">&quot;h3&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> link = item.querySelector(<span class="string">&quot;.yuRUbf&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> text = item.querySelector(<span class="string">&quot;.VwiC3b&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> kategorie = item.querySelector(<span class="string">&quot;.iUh30 &quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (title &amp;&amp; link &amp;&amp; text &amp;&amp; kategorie) &#123;</span><br><span class="line">          contentsObjList.push(&#123;</span><br><span class="line">            title: title.textContent, <span class="comment">// 타이틀</span></span><br><span class="line">            link: link.children[<span class="number">0</span>].href, <span class="comment">// 링크</span></span><br><span class="line">            text: text.textContent, <span class="comment">// 내용</span></span><br><span class="line">            kategorie: kategorie.textContent, <span class="comment">// 카테고리</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 호출된 브라우저 영역 콘솔창에서 확인할 수 있음</span></span><br><span class="line">    <span class="built_in">console</span>.log(contentsList); <span class="comment">// 검색한 엘리먼트 리스트</span></span><br><span class="line">    <span class="built_in">console</span>.log(contentsObjList); <span class="comment">// 검색한 콘텐츠 오브젝트 리스트</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> contentsObjList;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 브라우저 닫기</span></span><br><span class="line">  browser.close();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 검색결과 반환</span></span><br><span class="line">  <span class="keyword">return</span> searchData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="요소-대기"><a href="#요소-대기" class="headerlink" title="요소 대기"></a>요소 대기</h2><p><code>headless</code> 모드는 이제 <code>true</code>로 설정해준다. 브라우저가 크롤링하는 모습을 직접 확인하고 싶으면 <code>false</code>로 그냥 두면 된다. 이제 순서대로 코드를 살펴보자. <code>page.waitForSelector</code> 메서드를 추가했으며, 인자로 쿼리 셀렉터와 옵션이 들어간다. 이 메서드는 셀렉터 요소가 로드될 때 까지 대기하며, <code>timeout</code>로 대기 시간을 설정할 수 있다. 대기시간이 끝나도 해당 요소를 로드하지 못하면 에러를 뱉어내며, 이 경우 <code>title</code>에 검색결과가 없다는 값을 리턴해 준다.</p>
<h2 id="브라우저-영역"><a href="#브라우저-영역" class="headerlink" title="브라우저 영역"></a>브라우저 영역</h2><p><code>page.evaluate</code> 메서드는 Puppeteer로 호출한 브라우저에서 실행되는 함수로써 여기다가 크롤링 코드를 작성하면 된다. 구글 검색결과의 각 엘리먼트 셀렉터는 <code>#rso div.g</code>이며, 해당 요소들을 <code>Array.from</code> 메서드를 통해 배열로 담았다. 필요한 정보만 가져오기 위해 <code>forEach</code>을 돌려 오브젝트에 내용을 담고 리턴해 준 다음 브라우저는 종료가 된다.</p>
<h2 id="검색결과를-응답해주기"><a href="#검색결과를-응답해주기" class="headerlink" title="검색결과를 응답해주기"></a>검색결과를 응답해주기</h2><p>이제 이 응답값을 미들웨어 함수에서 받아서 클라이언트의 응답값으로 보내줘야한다. 위 코드의 미들웨어 함수를 보면 콜백함수를 <code>async</code>로 감싸고 결과값을 <code>await</code> 키워드로 받아 응답값으로 보내주고 있다. 클라이언트의 콘솔창을 보면 크롤링한 리스트를 출력하는걸 확인할 수 있다.</p>
<h1 id="연속-검색"><a href="#연속-검색" class="headerlink" title="연속 검색"></a>연속 검색</h1><p>지금까지 구현된건 첫 페이지만 크롤링한 것이며, 다음 페이지를 추가로 크롤링을 하려면 아래 순서가 필요하다.</p>
<ol>
<li>검색결과 맨아래 다음버튼이 있는지 찾기</li>
<li>다음 버튼 있는 경우 다음 페이지로 이동</li>
<li>다음 페이지 내용이 불러올때까지 대기</li>
<li>다음 페이지 크롤링</li>
</ol>
<p>아래처럼 코드를 수정한다.</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// express 객체 생성</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 포트를 app 객체에 설정</span></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">5000</span>;</span><br><span class="line">app.listen(port);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 미들웨어 함수를 특정 경로에 등록</span></span><br><span class="line">app.use(<span class="string">&quot;/api/data&quot;</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;검색 키워드: &quot;</span> + req.query.keyword);</span><br><span class="line">  <span class="keyword">const</span> resultList = <span class="keyword">await</span> openBrowser(req.query.keyword);</span><br><span class="line">  <span class="built_in">console</span>.log(resultList);</span><br><span class="line">  res.json(resultList);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`server running at http <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// puppeteer 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&quot;puppeteer&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 브라우저 오픈 함수</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>keyword 검색 키워드</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;array&#125;</span> </span>검색 결과</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">openBrowser</span>(<span class="params">keyword</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 모든 검색결과</span></span><br><span class="line">  <span class="keyword">let</span> searchAllData = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 브라우저 실행 및 옵션, 현재 옵션은 headless 모드 사용 여부</span></span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123; <span class="attr">headless</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 브라우저 열기</span></span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 포탈로 이동</span></span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">&quot;https://www.google.com/&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 키워드 입력</span></span><br><span class="line">  <span class="keyword">await</span> page.type(<span class="string">&quot;input[class=&#x27;gLFyf gsfi&#x27;]&quot;</span>, keyword);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 키워드 검색</span></span><br><span class="line">  <span class="keyword">await</span> page.type(<span class="string">&quot;input[class=&#x27;gLFyf gsfi&#x27;]&quot;</span>, <span class="built_in">String</span>.fromCharCode(<span class="number">13</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 검색하고 싶은 페이지 수 만큼 반복</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 처음 검색</span></span><br><span class="line">    <span class="keyword">if</span> (i === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// 예외 처리</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 해당 콘텐츠가 로드될 때까지 대기</span></span><br><span class="line">        <span class="keyword">await</span> page.waitForSelector(<span class="string">&quot;#rso div.g&quot;</span>, &#123; <span class="attr">timeout</span>: <span class="number">10000</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 크롤링해서 검색 결과들을 담음</span></span><br><span class="line">        searchAllData.push(...(<span class="keyword">await</span> crawlingData()));</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="comment">// 해당 태그가 없을 시 검색결과 없음 반환</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;에러 발생: &quot;</span> + error);</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">          &#123;</span><br><span class="line">            title: <span class="string">&quot;검색결과 없음&quot;</span>,</span><br><span class="line">            link: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            text: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            kategorie: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 처음 이후 검색</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 예외 처리</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 다음 버튼이 로드될때까지 대기</span></span><br><span class="line">        <span class="keyword">await</span> page.waitForSelector(<span class="string">&quot;#pnnext&quot;</span>, &#123; <span class="attr">timeout</span>: <span class="number">10000</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 브라우저를 호출해 다음 버튼을 클릭</span></span><br><span class="line">        <span class="keyword">await</span> page.evaluate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> nextBtn = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#pnnext&quot;</span>);</span><br><span class="line">          <span class="keyword">if</span> (nextBtn) &#123;</span><br><span class="line">            nextBtn.click();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 크롤링해서 검색 결과들을 담음</span></span><br><span class="line">        searchAllData.push(...(<span class="keyword">await</span> crawlingData()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 다음 버튼이 더이상 없는 경우 지금까지 크롤링한 모든 검색결과 반환</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="keyword">return</span> searchAllData;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 크롤링 함수</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return <span class="type">&#123;array&#125;</span> </span>검색 결과</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">crawlingData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 해당 콘텐츠가 로드될 때까지 대기</span></span><br><span class="line">    <span class="keyword">await</span> page.waitForSelector(<span class="string">&quot;#rso div.g&quot;</span>, &#123; <span class="attr">timeout</span>: <span class="number">10000</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 호출된 브라우저 영역</span></span><br><span class="line">    <span class="keyword">const</span> searchData = <span class="keyword">await</span> page.evaluate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 검색된 돔 요소를 배열에 담음</span></span><br><span class="line">      <span class="keyword">const</span> contentsList = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;#rso div.g&quot;</span>));</span><br><span class="line">      <span class="keyword">let</span> contentsObjList = [];</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 검색결과 크롤링</span></span><br><span class="line">      contentsList.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.className === <span class="string">&quot;g&quot;</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> title = item.querySelector(<span class="string">&quot;h3&quot;</span>);</span><br><span class="line">          <span class="keyword">const</span> link = item.querySelector(<span class="string">&quot;.yuRUbf&quot;</span>);</span><br><span class="line">          <span class="keyword">const</span> text = item.querySelector(<span class="string">&quot;.VwiC3b&quot;</span>);</span><br><span class="line">          <span class="keyword">const</span> kategorie = item.querySelector(<span class="string">&quot;.iUh30 &quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (title &amp;&amp; link &amp;&amp; text &amp;&amp; kategorie) &#123;</span><br><span class="line">            contentsObjList.push(&#123;</span><br><span class="line">              title: title.textContent, <span class="comment">// 타이틀</span></span><br><span class="line">              link: link.children[<span class="number">0</span>].href, <span class="comment">// 링크</span></span><br><span class="line">              text: text.textContent, <span class="comment">// 내용</span></span><br><span class="line">              kategorie: kategorie.textContent, <span class="comment">// 카테고리</span></span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 호출된 브라우저 영역 콘솔창에서 확인할 수 있음</span></span><br><span class="line">      <span class="built_in">console</span>.log(contentsList); <span class="comment">// 검색한 엘리먼트 리스트</span></span><br><span class="line">      <span class="built_in">console</span>.log(contentsObjList); <span class="comment">// 검색한 콘텐츠 오브젝트 리스트</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> contentsObjList;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 검색결과 반환</span></span><br><span class="line">    <span class="keyword">return</span> searchData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 브라우저 닫기</span></span><br><span class="line">  browser.close();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 모든 검색결과 반환</span></span><br><span class="line">  <span class="keyword">return</span> searchAllData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제 추가된 코드들을 살펴보자.</p>
<h2 id="모든-검색결과를-담을-배열-설정"><a href="#모든-검색결과를-담을-배열-설정" class="headerlink" title="모든 검색결과를 담을 배열 설정"></a>모든 검색결과를 담을 배열 설정</h2><p>31라인을 보면 <code>searchAllData</code> 배열을 추가하였으며, 이 배열안에 각 페이지마다 크롤링한 데이터가 들어간다.</p>
<h2 id="브라우저-호출하는-영역을-함수로-묶음"><a href="#브라우저-호출하는-영역을-함수로-묶음" class="headerlink" title="브라우저 호출하는 영역을 함수로 묶음"></a>브라우저 호출하는 영역을 함수로 묶음</h2><p>각 페이지마다 크롤링을 반복해줘야되기 때문에 101번째 라인을 보면 <code>crawlingData</code> 함수로 따로 묶어줬다. 그리고 리턴값은 <code>searchData</code>로 해주며, 기존 코드의 예외 처리(<code>try</code>)안에 있던 <code>page.waitForSelector</code> 메서드만 함수 상단에 추가해 준다. 대략적인 형태는 아래와 같다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 크롤링 함수</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;array&#125;</span> </span>검색 결과</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">crawlingData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 해당 콘텐츠가 로드될 때까지 대기</span></span><br><span class="line">  <span class="keyword">await</span> page.waitForSelector(<span class="string">&quot;#rso div.g&quot;</span>, &#123; <span class="attr">timeout</span>: <span class="number">10000</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 호출된 브라우저 영역</span></span><br><span class="line">  <span class="keyword">const</span> searchData = <span class="keyword">await</span> page.evaluate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... 기존 크롤링 코드</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> contentsObjList;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 검색결과 반환</span></span><br><span class="line">  <span class="keyword">return</span> searchData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="처음-검색-후-다음-페이지로-이동하여-검색"><a href="#처음-검색-후-다음-페이지로-이동하여-검색" class="headerlink" title="처음 검색 후 다음 페이지로 이동하여 검색"></a>처음 검색 후 다음 페이지로 이동하여 검색</h2><p>코드 49번 라인을 보면 반복문이 실행되며, 검색하고 싶은 페이지만큼 반복되도록 되어있다. 위 코드는 10번만 반복하게 했으며, 반복 횟수를 늘리면 더 많은 페이지를 크롤링할 수 있다. 각 예외 처리는 2개 분기로 되어있으며, 이유는 계속 페이지마다 검색을 하는 경우 결과가 여러가지 있기 때문이다.</p>
<h3 id="검색-결과의-경우들"><a href="#검색-결과의-경우들" class="headerlink" title="검색 결과의 경우들"></a>검색 결과의 경우들</h3><ol>
<li>처음 검색에 아무 검색결과가 없는 경우</li>
<li>처음 검색과는 있는데 다음 버튼이 없어서 검색결과가 첫 페이지만 있는 경우</li>
<li>다음 페이지가 존재해 계속 검색을 진행하다 마지막 페이지에 도달해서 다음 버튼이 없는 경우</li>
</ol>
<p>처음 검색은 51라인부터 시작되며 검색결과가 없다면 59라인에서 에러를 캐치하며 클라이언트에 <code>검색결과 없음</code>을 리턴해 준다. 검색 결과가 있으면 두번째 반복이 73라인에서 실행되며, 다음 버튼이 있는 경우 83라인 함수에서 다음버튼을 클릭하고 <code>crawlingData</code> 함수가 실행되어 크롤링을 계속 반복하게 된다. 크롤링 결과값은 <code>searchAllData</code> 배열에 전개연산자를 활용하여 차곡차곡 쌓이도록 해준다. 이렇게 계속 다음 페이지로 이동하고 더이상 다음버튼이 없으면 91라인에서 에러를 캐치하여 지금까지 모은 <code>searchAllData</code>를 리턴하게 된다. <code>headless</code> 모드를 <code>false</code>로 설정하면 브라우저가 각 페이지를 돌면서 크롤링을 하는 모습을 직접 볼 수 있다.</p>
<h2 id="결과-확인"><a href="#결과-확인" class="headerlink" title="결과 확인"></a>결과 확인</h2><p>서버 터미널이나 클라이언트 콘솔창을 확인하면 각 페이지마다 크롤링한 데이터를 정상적으로 응답해주는것을 확인할 수 있다. 지금까지 클라이언트, 서버 셋팅 및 연속 크롤링하는 것까지 알아봤으며 이제 이 응답값을 클라이언트에 뿌려주는 작업을 해보자.</p>
<h1 id="클라이언트에서-받은-데이터-출력하기"><a href="#클라이언트에서-받은-데이터-출력하기" class="headerlink" title="클라이언트에서 받은 데이터 출력하기"></a>클라이언트에서 받은 데이터 출력하기</h1><h2 id="출력될-컴포넌트-추가"><a href="#출력될-컴포넌트-추가" class="headerlink" title="출력될 컴포넌트 추가"></a>출력될 컴포넌트 추가</h2><p>데이터가 들어갈 영역을 만들어주자. 우선 <code>/client/src/components</code> 디렉토리에 <code>SearchItem.tsx</code> 파일을 생성하고 아래 코드를 입력해준다.</p>
<figure class="highlight javascript"><figcaption><span>SearchItem.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchItem = <span class="function">(<span class="params">props: &#123; item: any &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; item &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;card&quot;</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;top&quot;</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;kategorie&quot;</span>&gt;&#123;item.kategorie&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;title&quot;</span>&gt;&#123;item.title&#125;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;bottom&quot;</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;text&quot;</span>&gt;&#123;item.text&#125;&lt;/div&gt;</span><br><span class="line">        &lt;a href=&#123;item.link&#125; className=<span class="string">&quot;link&quot;</span> target=<span class="string">&quot;_blank&quot;</span> rel=<span class="string">&quot;noreferrer&quot;</span>&gt;</span><br><span class="line">          더보기</span><br><span class="line">        &lt;/a&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchItem;</span><br></pre></td></tr></table></figure>

<h2 id="컴포넌트에-데이터-전달하기"><a href="#컴포넌트에-데이터-전달하기" class="headerlink" title="컴포넌트에 데이터 전달하기"></a>컴포넌트에 데이터 전달하기</h2><p><code>SearchList.tsx</code> 파일과 <code>App.tsx</code> 파일도 각각 아래처럼 수정해준다.</p>
<p><strong>SearchList.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>SearchList.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchItem <span class="keyword">from</span> <span class="string">&quot;./SearchItem&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchList = <span class="function">(<span class="params">props: &#123; searchData: [] &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; searchData &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;card-list&quot;</span>&gt;</span><br><span class="line">      &#123;searchData.map((item: any, <span class="attr">idx</span>: number): JSX.Element =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">SearchItem</span> <span class="attr">key</span>=<span class="string">&#123;idx&#125;</span> <span class="attr">item</span>=<span class="string">&#123;item&#125;</span> /&gt;</span></span>;</span><br><span class="line">      &#125;)&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchList;</span><br></pre></td></tr></table></figure>

<p><strong>App.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>App.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchForm <span class="keyword">from</span> <span class="string">&quot;./components/SearchForm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchList <span class="keyword">from</span> <span class="string">&quot;./components/SearchList&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [searchData, setSearchData] = useState&lt;any&gt;([]);</span><br><span class="line">  <span class="keyword">const</span> getData = <span class="function">(<span class="params">keyword: string</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;검색 키워드: &quot;</span> + keyword);</span><br><span class="line">    fetch(<span class="string">`api/data?keyword=<span class="subst">$&#123;keyword&#125;</span>`</span>)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res.json();</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        setSearchData(data);</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;SearchForm getData=&#123;getData&#125; /&gt;</span><br><span class="line">      &lt;SearchList searchData=&#123;searchData&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>


<p>과정을 살펴보자, 서버에서 응답값이 오면 <code>App.tsx</code>의 15번째 라인에서 받고 이것을 <code>SearchList</code> 컴포넌트에 전달해 준다. <code>SearchList.tsx</code>를 보면 이 응답값을 <code>props</code>로 전달받았으며, 이 값은 배열이기 때문에 <code>Array.map</code> 메서드를 사용하여 <code>SearchItem</code> 컴포넌트를 리턴하고 있다. 이렇게 리턴받은 <code>SearchItem</code> 컴포넌트는 <code>SearchItem.tsx</code> 파일의 코드처럼, 카테고리, 제목, 본문내용, 링크를 출력하고 있는걸 확인할 수 있다.</p>
<h2 id="스타일-꾸며주기"><a href="#스타일-꾸며주기" class="headerlink" title="스타일 꾸며주기"></a>스타일 꾸며주기</h2><p>CSS 적용이 안되었기 때문에 실제 화면은 이상하게 보일것이다. <code>App.css</code> 파일에 간단히 스타일을 추가해 주자.</p>
<figure class="highlight css"><figcaption><span>App.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.App</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.form</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.form-text</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">65px</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.form-btn</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#13424b</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card-list</span> &#123;</span><br><span class="line">  <span class="attribute">column-count</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">column-gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.top</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#13424b</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.top</span> <span class="selector-class">.kategorie</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">11px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.top</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.bottom</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.bottom</span> <span class="selector-class">.link</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e5e5e5</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="추가-화면-및-비활성-처리"><a href="#추가-화면-및-비활성-처리" class="headerlink" title="추가 화면 및 비활성 처리"></a>추가 화면 및 비활성 처리</h1><p>마무리 단계이며, 아래 단계가 남았다.</p>
<ol>
<li>검색하는 동안 출력될 화면 추가</li>
<li>검색하는 동안 폼 비활성(disable) 처리</li>
<li>검색결과 없는 경우 추가</li>
</ol>
<p><code>SearchLoading.tsx</code> 파일을 생성하고 아래처럼 입력해 준다. 이 컴포넌트가 검색하는 동안 보여지는 부분이다.</p>
<figure class="highlight javascript"><figcaption><span>SearchLoading.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchLoading = <span class="function">(<span class="params">props: &#123; isOnLoading: boolean &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; isOnLoading &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;isOnLoading ? <span class="string">&quot;loading on&quot;</span> : <span class="string">&quot;loading&quot;</span>&#125;&gt;loading..&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchLoading;</span><br></pre></td></tr></table></figure>

<p>그리고 <code>SearchForm.tsx</code>, <code>SearchList.tsx</code>, <code>App.tsx</code>, <code>App.css</code> 파일들을 아래처럼 코드를 수정한다.</p>
<p><strong>SearchForm.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>SearchForm.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchForm = <span class="function">(<span class="params">props: &#123; getData: any; isOnLoading: boolean &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; getData, isOnLoading &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> [keyword, setKeyword] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;isOnLoading ? <span class="string">&quot;form disable&quot;</span> : <span class="string">&quot;form&quot;</span>&#125;&gt;</span><br><span class="line">      &lt;input</span><br><span class="line">        type=<span class="string">&quot;text&quot;</span></span><br><span class="line">        className=<span class="string">&quot;form-text&quot;</span></span><br><span class="line">        disabled=&#123;isOnLoading ? <span class="literal">true</span> : <span class="literal">false</span>&#125;</span><br><span class="line">        onChange=&#123;<span class="function">(<span class="params">e: any</span>) =&gt;</span> &#123;</span><br><span class="line">          setKeyword(e.target.value);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        onKeyPress=&#123;<span class="function">(<span class="params">e: any</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (e.charCode === <span class="number">13</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (keyword) &#123;</span><br><span class="line">              getData(keyword);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        type=<span class="string">&quot;button&quot;</span></span><br><span class="line">        className=<span class="string">&quot;form-btn&quot;</span></span><br><span class="line">        disabled=&#123;isOnLoading ? <span class="literal">true</span> : <span class="literal">false</span>&#125;</span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (keyword) &#123;</span><br><span class="line">            getData(keyword);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        search</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchForm;</span><br></pre></td></tr></table></figure>

<p><strong>SearchList.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>SearchList.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchItem <span class="keyword">from</span> <span class="string">&quot;./SearchItem&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SearchList = <span class="function">(<span class="params">props: &#123; searchData: []; isOnLoading: boolean &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; searchData, isOnLoading &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;isOnLoading ? <span class="string">&quot;card-list disable&quot;</span> : <span class="string">&quot;card-list&quot;</span>&#125;&gt;</span><br><span class="line">      &#123;searchData.map(</span><br><span class="line">        (item: any, <span class="attr">idx</span>: number): JSX.Element =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (item.kategorie &amp;&amp; item.kategorie &amp;&amp; item.text) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">SearchItem</span> <span class="attr">key</span>=<span class="string">&#123;idx&#125;</span> <span class="attr">item</span>=<span class="string">&#123;item&#125;</span> /&gt;</span></span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">              &lt;div key=&#123;idx&#125; className=<span class="string">&quot;none&quot;</span>&gt;</span><br><span class="line">                검색결과 없음</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            );</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> SearchList;</span><br></pre></td></tr></table></figure>

<p><strong>App.tsx</strong></p>
<figure class="highlight javascript"><figcaption><span>App.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchForm <span class="keyword">from</span> <span class="string">&quot;./components/SearchForm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchLoading <span class="keyword">from</span> <span class="string">&quot;./components/SearchLoading&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> SearchList <span class="keyword">from</span> <span class="string">&quot;./components/SearchList&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [searchData, setSearchData] = useState&lt;any&gt;([]);</span><br><span class="line">  <span class="keyword">const</span> [isOnLoading, setIsOnLoading] = useState(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> getData = <span class="function">(<span class="params">keyword: string</span>) =&gt;</span> &#123;</span><br><span class="line">    setIsOnLoading(<span class="literal">true</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;검색 키워드: &quot;</span> + keyword);</span><br><span class="line">    fetch(<span class="string">`api/data?keyword=<span class="subst">$&#123;keyword&#125;</span>`</span>)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res.json();</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        setSearchData(data);</span><br><span class="line">        setIsOnLoading(<span class="literal">false</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;SearchForm getData=&#123;getData&#125; isOnLoading=&#123;isOnLoading&#125; /&gt;</span><br><span class="line">      &lt;SearchLoading isOnLoading=&#123;isOnLoading&#125; /&gt;</span><br><span class="line">      &lt;SearchList searchData=&#123;searchData&#125; isOnLoading=&#123;isOnLoading&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<p><strong>App.css</strong></p>
<figure class="highlight css"><figcaption><span>App.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.App</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.form</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.form-text</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">65px</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.form-btn</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#13424b</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.form</span><span class="selector-class">.disable</span> <span class="selector-class">.form-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#b3b3b3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card-list</span> &#123;</span><br><span class="line">  <span class="attribute">column-count</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">column-gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.top</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#13424b</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card-list</span><span class="selector-class">.disable</span> <span class="selector-class">.top</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#b3b3b3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.top</span> <span class="selector-class">.kategorie</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">11px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.top</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.bottom</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card</span> <span class="selector-class">.bottom</span> <span class="selector-class">.link</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e5e5e5</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card-list</span><span class="selector-class">.disable</span> <span class="selector-class">.link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.card-list</span> <span class="selector-class">.none</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.loading</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.App</span> <span class="selector-class">.loading</span><span class="selector-class">.on</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="검색-시작-및-끝을-나타내는-값"><a href="#검색-시작-및-끝을-나타내는-값" class="headerlink" title="검색 시작 및 끝을 나타내는 값"></a>검색 시작 및 끝을 나타내는 값</h2><h3 id="컴포넌트에-검색중-여부-전달"><a href="#컴포넌트에-검색중-여부-전달" class="headerlink" title="컴포넌트에 검색중 여부 전달"></a>컴포넌트에 검색중 여부 전달</h3><p>코드를 하나씩 살펴보자. <code>App.tsx</code> 파일의 9번째 라인을 보면 <code>isOnLoading</code>값이 있는데 요청을 보내면 12번째 라인에서 <code>true</code>로 변경, 검색중을 나타내고, 응답을 받으면 20번째 라인에서 <code>false</code>로 변경되며 검색이 끝났다는 것을 의미한다. 이 값을 <code>SearchForm</code>, <code>SearchLoading</code>, <code>SearchList</code> 컴포넌트에 전달해 주었다.</p>
<h3 id="컴포넌트에서-검색중-여부-처리"><a href="#컴포넌트에서-검색중-여부-처리" class="headerlink" title="컴포넌트에서 검색중 여부 처리"></a>컴포넌트에서 검색중 여부 처리</h3><p><code>SearchLoading.tsx</code> 파일 6번째 라인을 보면 <code>isOnLoading</code>가 <code>true</code>일 경우 <code>on</code> 클래스를 추가해 준다. 평상시에 이 엘리먼트는 보이지 않다가 <code>on</code> 클래스가 추가되면 보여지도록 <code>App.css</code>에 설정되어있다.</p>
<p>다른 컴포넌트도 마찬가지로 <code>SearchForm.tsx</code>에서 11번째 라인을 보면 <code>isOnLoading</code>이 <code>true</code>면 폼들은 <code>disabled</code> 처리가 되며, 7번째 라인에서 <code>disable</code> 클래스를 주고있다. <code>SearchList.tsx</code> 컴포넌트도 검색중이면 <code>disable</code> 클래스를 주고있으며, 이 클래스로 검색중에 스타일을 변경하도록 <code>App.css</code>에 설정되어있다.</p>
<h2 id="검색결과-없는-경우"><a href="#검색결과-없는-경우" class="headerlink" title="검색결과 없는 경우"></a>검색결과 없는 경우</h2><p><code>SearchList.tsx</code>파일의 10번째 라인을 보면 전달받은 데이터 값이 모두 있을경우 데이터를 노출하고 없는 경우는 검색결과가 없다는 내용을 출력하고 있다.</p>
<h1 id="배포하기"><a href="#배포하기" class="headerlink" title="배포하기"></a>배포하기</h1><p>이제 로컬에서 작업한 결과물을 헤로쿠에 배포를 해보자.</p>
<h2 id="깃-초기화"><a href="#깃-초기화" class="headerlink" title="깃 초기화"></a>깃 초기화</h2><p>헤로쿠는 깃을 통해 업로드하기 때문에 루트 경로에서 아래 명령어로 깃을 초기화 해준다.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure>

<h2 id="빌드-설정"><a href="#빌드-설정" class="headerlink" title="빌드 설정"></a>빌드 설정</h2><h3 id="정적-파일-생성"><a href="#정적-파일-생성" class="headerlink" title="정적 파일 생성"></a>정적 파일 생성</h3><p><code>client</code> 디렉토리에서 아래 명령어를 입력해 배포용 정적 파일을 생성한다.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build</span><br></pre></td></tr></table></figure>

<h3 id="정적-파일-경로-설정"><a href="#정적-파일-경로-설정" class="headerlink" title="정적 파일 경로 설정"></a>정적 파일 경로 설정</h3><p>다음에 <code>index.js</code> 파일 최하단에 아래 코드를 추가해준다.</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ... 기존 코드</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// path 모듈 불러오기</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리액트 정적 파일 제공</span></span><br><span class="line">app.use(express.static(path.join(__dirname, <span class="string">&#x27;client/build&#x27;</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 라우트 설정</span></span><br><span class="line">app.get(<span class="string">&#x27;*&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.sendFile(path.join(__dirname+<span class="string">&#x27;/client/build/index.html&#x27;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="헤로쿠-빌드-명령어-설정"><a href="#헤로쿠-빌드-명령어-설정" class="headerlink" title="헤로쿠 빌드 명령어 설정"></a>헤로쿠 빌드 명령어 설정</h3><p>루트경로의 <code>package.json</code> 파일로 가서 <code>heroku-postbuild</code>를 아래처럼 추가해준다.</p>
<figure class="highlight javascript"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="string">&quot;nodemon index.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;concurrently \&quot;npm run dev:server\&quot; \&quot;npm run dev:client\&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev:server&quot;</span>: <span class="string">&quot;npm start&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dev:client&quot;</span>: <span class="string">&quot;cd client &amp;&amp; npm start&quot;</span>,</span><br><span class="line">  <span class="string">&quot;heroku-postbuild&quot;</span>: <span class="string">&quot;cd client &amp;&amp; npm install &amp;&amp; npm run build&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="헤로쿠-연동하기"><a href="#헤로쿠-연동하기" class="headerlink" title="헤로쿠 연동하기"></a>헤로쿠 연동하기</h2><p>헤로쿠에 대한 간략한 설명은 [이 포스팅]<a href="https://recordboy.github.io/2020/11/05/express-react-heroku-init/)%EC%9D%84">https://recordboy.github.io/2020/11/05/express-react-heroku-init/)을</a> 참고하면 된다. 기존에 회원이 아니면 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://heroku.com/">헤로쿠 홈페이지</a>에서 회원가입을 하고 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://devcenter.heroku.com/articles/heroku-cli">이곳에서</a> 헤로쿠 CLI를 설치하면 된다.</p>
<h3 id="로그인-및-프로젝트-생성"><a href="#로그인-및-프로젝트-생성" class="headerlink" title="로그인 및 프로젝트 생성"></a>로그인 및 프로젝트 생성</h3><p>아래 명령어를 입력하고 아무키나 입력하면 로그인 하라는 브라우저가 뜨고 로그인을 해주자.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ heroku login</span><br></pre></td></tr></table></figure>

<p>아래 명령어로 헤로쿠에 프로젝트를 생성하며 프로젝트 이름은 다른 프로젝트와 중복되지 않게 정한다. <code>git remote -v</code> 명령어로 저장소가 제대로 연결되었는지 확인한다.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ heroku create 프로젝트이름</span><br><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure>

<blockquote>
<p>헤로쿠 프로젝트 주소와 로컬에서 바라보는 주소가 다를경우 <code>$ git remote set-url heroku 프로젝트주소</code> 명령어를 사용하여 동일하게 맞춰주면 된다.</p>
</blockquote>
<h3 id="빌드팩-추가"><a href="#빌드팩-추가" class="headerlink" title="빌드팩 추가"></a>빌드팩 추가</h3><p>한가지 또 추가해줘야 하는 것이 있는데 Puppeteer를 헤로쿠에서 사용하려면 프로젝트에 빌드팩을 추가해줘야 한다. 아래 명령어를 입력해주자.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ heroku buildpacks:clear</span><br><span class="line">$ heroku buildpacks:add --index 1 https:&#x2F;&#x2F;github.com&#x2F;jontewks&#x2F;puppeteer-heroku-buildpack</span><br><span class="line">$ heroku buildpacks:add --index 1 heroku&#x2F;nodejs</span><br></pre></td></tr></table></figure>

<p>그리고 <code>index.js</code> 파일로 가서 34번째 라인의 브라우저 실행 옵션에 <code>args</code>값을 아래처럼 추가해 준다.</p>
<figure class="highlight javascript"><figcaption><span>index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 브라우저 실행 및 옵션, 현재 옵션은 headless 모드 사용 여부</span></span><br><span class="line"><span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123; </span><br><span class="line">  headless: <span class="literal">true</span>,</span><br><span class="line">  args: [</span><br><span class="line">    <span class="string">&quot;--no-sandbox&quot;</span>,</span><br><span class="line">    <span class="string">&quot;--disable-setuid-sandbox&quot;</span>,</span><br><span class="line">    <span class="string">&quot;--window-size=1600,2000&quot;</span>,</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="업로드"><a href="#업로드" class="headerlink" title="업로드"></a>업로드</h2><p>이제 배포를 위한 모든 준비가 끝났다. 깃 명령어를 입력하여 푸쉬해주자.</p>
<figure class="highlight plain"><figcaption><span>TERMINAL</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -m &#39;커밋 메세지&#39;</span><br><span class="line">$ git push heroku master</span><br></pre></td></tr></table></figure>

<p>이제 배포된 페이지를 확인해 보자. url은 <code>https://프로젝트이름.herokuapp.com/</code>로 가면 확인할 수 있다. 정상적으로 배포된 페이지를 화인할 수 있다.</p>
<p>지금까지 만들어본건 검색하는 기능만 있는 아주 기본적인 형태이지만 잘만 활용하면 요청, 응답값으로 여러가지 형태로 발전시킬 수 있다. 예를들어 검색 포탈명을 요청해 여러 포탈의 검색결과를 한번에 찾아보거나 각 다음 페이지를 넘기는 <code>index</code>값을 응답을 받아 검색 로딩시간을 알아보는 등 여러가지 활용이 가능하다.</p>
<p>마지막으로 주의할 점이 있는데, 헤로쿠 서버의 무료 용량은 500MB로 제한된다. Puppeteer는 자체적으로 Chromium을 내장하고 있는데 이것이 꽤 용량이 나간다.(대략 300MB 조금 넘게) 그래서 프로젝트를 크게 불려 배포를 하면 가끔 용량이 부족하다고 에러가 나오는 경우가 있다. 또 한가지는 Puppeteer를 많이 사용하다보면 구글에서 봇으로 판단하여 ‘로봇이 아닙니다’ 체크를 해야하는 경우도 있었다. 아무튼 Puppeteer는 크롤링 말고 여러가지 강력한 기능이 있기 때문에 잘 활용하면 좋은 도구가 될 수 있을 것이다.</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><blockquote>
<p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://pptr.dev/">Puppeteer</a><br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/52225461/puppeteer-unable-to-run-on-heroku">Puppeteer unable to run on heroku</a></p>
</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>[Express] Puppeteer, React, Express를 활용한 크롤러 만들기 및 Heroku에 배포하기</p><p><a href="https://recordboy.github.io/2021/04/30/puppeteer-search/">https://recordboy.github.io/2021/04/30/puppeteer-search/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>recordboy</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-04-30</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-09-28</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="external nofollow noopener noreferrer" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="external nofollow noopener noreferrer" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="external nofollow noopener noreferrer" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/express/">express</a><a class="link-muted mr-2" rel="tag" href="/tags/react/">react</a><a class="link-muted mr-2" rel="tag" href="/tags/heroku/">heroku</a><a class="link-muted mr-2" rel="tag" href="/tags/web-crawling/">web crawling</a><a class="link-muted mr-2" rel="tag" href="/tags/typescript/">typescript</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/07/13/coding-test-hash/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[Algorithm] 코딩테스트 풀이 - 해시</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/12/15/javascript-shallow-copy-deep-copy/"><span class="level-item">[JavaScript] 얕은 복사, 깊은 복사</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">댓글</h3><script src="https://utteranc.es/client.js" repo="recordboy/recordboy-comments" issue-term="pathname" label="some-issue-label" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">카탈로그</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Puppeteer"><span class="level-left"><span class="level-item">1</span><span class="level-item">Puppeteer</span></span></a></li><li><a class="level is-mobile" href="#프로젝트-초기화"><span class="level-left"><span class="level-item">2</span><span class="level-item">프로젝트 초기화</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#디렉토리-생성-및-필요-모듈-설치"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">디렉토리 생성 및 필요 모듈 설치</span></span></a></li><li><a class="level is-mobile" href="#리액트-초기화"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">리액트 초기화</span></span></a></li><li><a class="level is-mobile" href="#프록시-설정"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">프록시 설정</span></span></a></li><li><a class="level is-mobile" href="#서버-express-클라이언트-react-동시-시작-설정"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">서버(express), 클라이언트(react) 동시 시작 설정</span></span></a></li></ul></li><li><a class="level is-mobile" href="#클라이언트에서-요청-작업"><span class="level-left"><span class="level-item">3</span><span class="level-item">클라이언트에서 요청 작업</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#검색-폼-및-리스트-추가"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">검색 폼 및 리스트 추가</span></span></a></li><li><a class="level is-mobile" href="#fetch-함수를-App-컴포넌트로-이동"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">fetch 함수를 App 컴포넌트로 이동</span></span></a></li></ul></li><li><a class="level is-mobile" href="#서버에서-요청-받기"><span class="level-left"><span class="level-item">4</span><span class="level-item">서버에서 요청 받기</span></span></a></li><li><a class="level is-mobile" href="#Puppeteer-설치"><span class="level-left"><span class="level-item">5</span><span class="level-item">Puppeteer 설치</span></span></a></li><li><a class="level is-mobile" href="#검색해보기"><span class="level-left"><span class="level-item">6</span><span class="level-item">검색해보기</span></span></a></li><li><a class="level is-mobile" href="#검색-내용-크롤링하기"><span class="level-left"><span class="level-item">7</span><span class="level-item">검색 내용 크롤링하기</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#크롤링할-내용-형태"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">크롤링할 내용 형태</span></span></a></li><li><a class="level is-mobile" href="#요소-대기"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">요소 대기</span></span></a></li><li><a class="level is-mobile" href="#브라우저-영역"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">브라우저 영역</span></span></a></li><li><a class="level is-mobile" href="#검색결과를-응답해주기"><span class="level-left"><span class="level-item">7.4</span><span class="level-item">검색결과를 응답해주기</span></span></a></li></ul></li><li><a class="level is-mobile" href="#연속-검색"><span class="level-left"><span class="level-item">8</span><span class="level-item">연속 검색</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#모든-검색결과를-담을-배열-설정"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">모든 검색결과를 담을 배열 설정</span></span></a></li><li><a class="level is-mobile" href="#브라우저-호출하는-영역을-함수로-묶음"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">브라우저 호출하는 영역을 함수로 묶음</span></span></a></li><li><a class="level is-mobile" href="#처음-검색-후-다음-페이지로-이동하여-검색"><span class="level-left"><span class="level-item">8.3</span><span class="level-item">처음 검색 후 다음 페이지로 이동하여 검색</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#검색-결과의-경우들"><span class="level-left"><span class="level-item">8.3.1</span><span class="level-item">검색 결과의 경우들</span></span></a></li></ul></li><li><a class="level is-mobile" href="#결과-확인"><span class="level-left"><span class="level-item">8.4</span><span class="level-item">결과 확인</span></span></a></li></ul></li><li><a class="level is-mobile" href="#클라이언트에서-받은-데이터-출력하기"><span class="level-left"><span class="level-item">9</span><span class="level-item">클라이언트에서 받은 데이터 출력하기</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#출력될-컴포넌트-추가"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">출력될 컴포넌트 추가</span></span></a></li><li><a class="level is-mobile" href="#컴포넌트에-데이터-전달하기"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">컴포넌트에 데이터 전달하기</span></span></a></li><li><a class="level is-mobile" href="#스타일-꾸며주기"><span class="level-left"><span class="level-item">9.3</span><span class="level-item">스타일 꾸며주기</span></span></a></li></ul></li><li><a class="level is-mobile" href="#추가-화면-및-비활성-처리"><span class="level-left"><span class="level-item">10</span><span class="level-item">추가 화면 및 비활성 처리</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#검색-시작-및-끝을-나타내는-값"><span class="level-left"><span class="level-item">10.1</span><span class="level-item">검색 시작 및 끝을 나타내는 값</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#컴포넌트에-검색중-여부-전달"><span class="level-left"><span class="level-item">10.1.1</span><span class="level-item">컴포넌트에 검색중 여부 전달</span></span></a></li><li><a class="level is-mobile" href="#컴포넌트에서-검색중-여부-처리"><span class="level-left"><span class="level-item">10.1.2</span><span class="level-item">컴포넌트에서 검색중 여부 처리</span></span></a></li></ul></li><li><a class="level is-mobile" href="#검색결과-없는-경우"><span class="level-left"><span class="level-item">10.2</span><span class="level-item">검색결과 없는 경우</span></span></a></li></ul></li><li><a class="level is-mobile" href="#배포하기"><span class="level-left"><span class="level-item">11</span><span class="level-item">배포하기</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#깃-초기화"><span class="level-left"><span class="level-item">11.1</span><span class="level-item">깃 초기화</span></span></a></li><li><a class="level is-mobile" href="#빌드-설정"><span class="level-left"><span class="level-item">11.2</span><span class="level-item">빌드 설정</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#정적-파일-생성"><span class="level-left"><span class="level-item">11.2.1</span><span class="level-item">정적 파일 생성</span></span></a></li><li><a class="level is-mobile" href="#정적-파일-경로-설정"><span class="level-left"><span class="level-item">11.2.2</span><span class="level-item">정적 파일 경로 설정</span></span></a></li><li><a class="level is-mobile" href="#헤로쿠-빌드-명령어-설정"><span class="level-left"><span class="level-item">11.2.3</span><span class="level-item">헤로쿠 빌드 명령어 설정</span></span></a></li></ul></li><li><a class="level is-mobile" href="#헤로쿠-연동하기"><span class="level-left"><span class="level-item">11.3</span><span class="level-item">헤로쿠 연동하기</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#로그인-및-프로젝트-생성"><span class="level-left"><span class="level-item">11.3.1</span><span class="level-item">로그인 및 프로젝트 생성</span></span></a></li><li><a class="level is-mobile" href="#빌드팩-추가"><span class="level-left"><span class="level-item">11.3.2</span><span class="level-item">빌드팩 추가</span></span></a></li></ul></li><li><a class="level is-mobile" href="#업로드"><span class="level-left"><span class="level-item">11.4</span><span class="level-item">업로드</span></span></a></li></ul></li><li><a class="level is-mobile" href="#References"><span class="level-left"><span class="level-item">12</span><span class="level-item">References</span></span></a></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/economy/"><span class="level-start"><span class="level-item">economy</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/economy/insurance/"><span class="level-start"><span class="level-item">insurance</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/etc/"><span class="level-start"><span class="level-item">etc</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/"><span class="level-start"><span class="level-item">front-end</span></span><span class="level-end"><span class="level-item tag">80</span></span></a><ul><li><a class="level is-mobile" href="/categories/front-end/css/"><span class="level-start"><span class="level-item">css</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/html/"><span class="level-start"><span class="level-item">html</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/javascript/"><span class="level-start"><span class="level-item">javascript</span></span><span class="level-end"><span class="level-item tag">53</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/jquery/"><span class="level-start"><span class="level-item">jquery</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/react/"><span class="level-start"><span class="level-item">react</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/sass/"><span class="level-start"><span class="level-item">sass</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/svelte-js/"><span class="level-start"><span class="level-item">svelte.js</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/typescript/"><span class="level-start"><span class="level-item">typescript</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/ui/"><span class="level-start"><span class="level-item">ui</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/front-end/vue-js/"><span class="level-start"><span class="level-item">vue.js</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/git/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/git/github/"><span class="level-start"><span class="level-item">github</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/mac/"><span class="level-start"><span class="level-item">mac</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/node-js/"><span class="level-start"><span class="level-item">node.js</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/server/"><span class="level-start"><span class="level-item">server</span></span><span class="level-end"><span class="level-item tag">14</span></span></a><ul><li><a class="level is-mobile" href="/categories/server/centos/"><span class="level-start"><span class="level-item">centos</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/server/express/"><span class="level-start"><span class="level-item">express</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/server/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/server/mysql/"><span class="level-start"><span class="level-item">mysql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/server/nginx/"><span class="level-start"><span class="level-item">nginx</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/web/"><span class="level-start"><span class="level-item">web</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apache/"><span class="tag">apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/centos/"><span class="tag">centos</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chrome/"><span class="tag">chrome</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/closure/"><span class="tag">closure</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/command/"><span class="tag">command</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debug/"><span class="tag">debug</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/economy/"><span class="tag">economy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/es5/"><span class="tag">es5</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/es6/"><span class="tag">es6</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/es8/"><span class="tag">es8</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/eslint/"><span class="tag">eslint</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/express/"><span class="tag">express</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/extension/"><span class="tag">extension</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/functional-programming/"><span class="tag">functional programming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hash/"><span class="tag">hash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/heroku/"><span class="tag">heroku</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/http/"><span class="tag">http</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/insurance/"><span class="tag">insurance</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">63</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jekyll/"><span class="tag">jekyll</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jquery/"><span class="tag">jquery</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jquey/"><span class="tag">jquey</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jsx/"><span class="tag">jsx</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mac/"><span class="tag">mac</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/module/"><span class="tag">module</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node-js/"><span class="tag">node.js</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/php/"><span class="tag">php</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/prettier/"><span class="tag">prettier</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pure-function/"><span class="tag">pure function</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react/"><span class="tag">react</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rest/"><span class="tag">rest</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/restfull/"><span class="tag">restfull</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sass/"><span class="tag">sass</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/seo/"><span class="tag">seo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/svelte-js/"><span class="tag">svelte.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/typescript/"><span class="tag">typescript</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ui/"><span class="tag">ui</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vanillajs/"><span class="tag">vanillajs</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vue-js/"><span class="tag">vue.js</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web-accessibility/"><span class="tag">web accessibility</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web-crawling/"><span class="tag">web crawling</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/youngcart5/"><span class="tag">youngcart5</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yum/"><span class="tag">yum</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="기록맨" height="28"></a><p class="is-size-7"><span>&copy; 2022 recordboy</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a><br><span id="busuanzi_container_site_uv"><span id="busuanzi_value_site_uv">0</span>명의 사용자가 방문 함</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/recordboy"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="external nofollow noopener noreferrer" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>